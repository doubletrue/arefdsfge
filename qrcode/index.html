<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0" />
  <link rel="stylesheet" href="./download.css" />
  <link rel="stylesheet" href="https://at.alicdn.com/t/font_831418_bp57ho8etys.css" />
  <title>正在跳转...</title>
</head>

<body>
  <div id="wrap">
    <div class="tips" id="isWx" style="display:none;font-size:16px;font-weight:bold;color:#fb4e47;">
      <p>微信/QQ无法直接访问，请点击右上角【···】</p>
      <p>选择<span>在浏览器中打开</span>即可访问哦。</p>
    </div>
    <div id="text">
      <div>
        <span id="address" style="font-size:18px;word-break: break-all;font-weight: bold;">sfsfsfsafsdf</span>
        <a id="copy" class="copy-btn" data-clipboard-action="copy" data-clipboard-target="#address">复制地址</a>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="https://cdn.staticfile.org/clipboard.js/1.6.1/clipboard.min.js"></script>
  <script>
    // 判断设备
    var u = navigator.userAgent;
    var isAndroid = u.indexOf('Android') > -1 || u.indexOf('Adr') > -1; //android终端
    var isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/); //ios终端
    var isWeixin = u.toLowerCase().match(/MicroMessenger/i) == "micromessenger";
    var isQQ = u.toLowerCase().match(/qq\//i) == "qq/";
    var timer = null;
    var url = getUrl()
    // 标签变量
    var WeixinDiv = document.getElementById('isWx');
    var copy = document.getElementById('copy');
    var address = document.getElementById('address');
    // 操作逻辑
    start()
    // 函数设定
    function start() {
      initCopy()
      if (url) {
          address.setAttribute("href", url)
          address.innerText=url
        }
      // 先判断是否是微信或qq，显示在浏览器中打开的提示
      if (isWeixin || isQQ) {
        // 微信，不能直接跳转
        WeixinDiv.style.display = 'block';
      } else {
        // 普通浏览器，直接跳转
        WeixinDiv.style.display = 'none';
        if (url) {
          window.location.href = url
        }
      };
    }
    // 获取参数
    function getUrl(variable) {
      var query = window.location.search.slice(5);
      return query
    }
    function initCopy(){
      var clipboard = new Clipboard('.copy-btn');
      clipboard.on('success', function (e) {
        alert('复制成功')
      });
    }
  </script>
</body>

</html>
